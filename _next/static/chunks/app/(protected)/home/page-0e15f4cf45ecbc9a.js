(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[650],{1494:(e,t,a)=>{"use strict";a.d(t,{A:()=>c});var s=a(8943);let r=(0,s.Z0)({name:"app",initialState:{isSimDataFetching:!1},reducers:{SET_FETCHING:(e,t)=>{e.isSimDataFetching=t.payload}}}),{SET_FETCHING:n}=r.actions,i=r.reducer;var l=a(1658),d=a(8254);let c=(0,s.U1)({reducer:{app:i,auth:l.Ay,device:d.Ay}})},1567:(e,t,a)=>{"use strict";a.d(t,{cn:()=>n});var s=a(3463),r=a(9795);function n(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,r.QP)((0,s.$)(t))}},1658:(e,t,a)=>{"use strict";a.d(t,{Ay:()=>h,MO:()=>m,T_:()=>u,_v:()=>o,w$:()=>x});var s=a(8943),r=a(9208);let n=r.A.get("access_token"),i=r.A.get("refresh_token"),l=r.A.get("fullname"),d=r.A.get("username"),c=(0,s.Z0)({name:"auth",initialState:{username:d||"",fullname:l||"",accessToken:n||"",refreshToken:i||"",error:""},reducers:{SET_TOKENS:(e,t)=>{let{username:a,fullname:s,accessToken:n,refreshToken:i}=t.payload;e.username=a,e.fullname=s,e.accessToken=n,e.refreshToken=i,r.A.set("access_token",n,{expires:7}),r.A.set("refresh_token",i,{expires:7}),r.A.set("fullname",s,{expires:7}),r.A.set("username",a,{expires:7})},LOGOUT:e=>{e.username="",e.fullname="",e.accessToken="",e.refreshToken="",r.A.remove("access_token"),r.A.remove("refresh_token"),r.A.remove("fullname"),r.A.remove("username")},SET_ERROR:(e,t)=>{e.error=t.payload},REMOVE_ERROR:e=>{e.error=""}}}),{SET_TOKENS:o,LOGOUT:u,SET_ERROR:m,REMOVE_ERROR:x}=c.actions,h=c.reducer},3307:(e,t,a)=>{"use strict";a.d(t,{A:()=>d});var s=a(2651),r=a(1658),n=a(1494);let i="https://cmsiot.saigoniot.vn:444",l=async(e,t,a)=>{let d=n.A.getState().auth.accessToken,c=n.A.getState().auth.refreshToken,[o,u]=await (0,s.A)({method:e,url:"".concat(i,"/").concat(t),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(d)},withCredentials:!1,data:a}).then(e=>[e.status,e.data]).catch(e=>[e.response.status,e.response.error]);if(200===o||201===o)return[o,u];if(401===o){let[d,o]=await (0,s.A)({method:"POST",url:"".concat(i,"/api/User/auth-refresh"),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)},withCredentials:!0}).then(e=>[e.status,e.data]).catch(e=>(n.A.dispatch((0,r.T_)()),[e.response.status,e.response.error]));if(200===d||201===d){let{access_token:s,refresh_token:i}=o;return n.A.dispatch((0,r._v)({accessToken:s,refreshToken:i})),l(e,t,a)}}return[500,{error:"Internal server error"}]},d=l},3312:(e,t,a)=>{"use strict";a.d(t,{$:()=>d});var s=a(5155);a(2115);var r=a(2317),n=a(1027),i=a(1567);let l=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function d(e){let{className:t,variant:a,size:n,asChild:d=!1,...c}=e,o=d?r.DX:"button";return(0,s.jsx)(o,{"data-slot":"button",className:(0,i.cn)(l({variant:a,size:n,className:t})),...c})}},3886:(e,t,a)=>{"use strict";a.d(t,{lV:()=>o,MJ:()=>v,zB:()=>m,eI:()=>p,lR:()=>g,C5:()=>f});var s=a(5155),r=a(2115),n=a(2317),i=a(9606),l=a(1567),d=a(6195);function c(e){let{className:t,...a}=e;return(0,s.jsx)(d.b,{"data-slot":"label",className:(0,l.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...a})}let o=i.Op,u=r.createContext({}),m=e=>{let{...t}=e;return(0,s.jsx)(u.Provider,{value:{name:t.name},children:(0,s.jsx)(i.xI,{...t})})},x=()=>{let e=r.useContext(u),t=r.useContext(h),{getFieldState:a}=(0,i.xW)(),s=(0,i.lN)({name:e.name}),n=a(e.name,s);if(!e)throw Error("useFormField should be used within <FormField>");let{id:l}=t;return{id:l,name:e.name,formItemId:"".concat(l,"-form-item"),formDescriptionId:"".concat(l,"-form-item-description"),formMessageId:"".concat(l,"-form-item-message"),...n}},h=r.createContext({});function p(e){let{className:t,...a}=e,n=r.useId();return(0,s.jsx)(h.Provider,{value:{id:n},children:(0,s.jsx)("div",{"data-slot":"form-item",className:(0,l.cn)("grid gap-2",t),...a})})}function g(e){let{className:t,...a}=e,{error:r,formItemId:n}=x();return(0,s.jsx)(c,{"data-slot":"form-label","data-error":!!r,className:(0,l.cn)("data-[error=true]:text-destructive-foreground",t),htmlFor:n,...a})}function v(e){let{...t}=e,{error:a,formItemId:r,formDescriptionId:i,formMessageId:l}=x();return(0,s.jsx)(n.DX,{"data-slot":"form-control",id:r,"aria-describedby":a?"".concat(i," ").concat(l):"".concat(i),"aria-invalid":!!a,...t})}function f(e){var t;let{className:a,...r}=e,{error:n,formMessageId:i}=x(),d=n?String(null!==(t=null==n?void 0:n.message)&&void 0!==t?t:""):r.children;return d?(0,s.jsx)("p",{"data-slot":"form-message",id:i,className:(0,l.cn)("text-destructive-foreground text-sm",a),...r,children:d}):null}},3900:(e,t,a)=>{"use strict";a.d(t,{p:()=>n});var s=a(5155);a(2115);var r=a(1567);function n(e){let{className:t,type:a,...n}=e;return(0,s.jsx)("input",{type:a,"data-slot":"input",className:(0,r.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...n})}},7081:(e,t,a)=>{"use strict";a.d(t,{E:()=>n});var s=a(5155),r=a(1567);function n(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"skeleton",className:(0,r.cn)("bg-accent animate-pulse rounded-md",t),...a})}},7710:(e,t,a)=>{Promise.resolve().then(a.bind(a,8878))},8254:(e,t,a)=>{"use strict";a.d(t,{AL:()=>i,Ay:()=>l,Sy:()=>n,r_:()=>r});let s=(0,a(8943).Z0)({name:"device",initialState:{isDeviceFetching:!0,devices_list:[],count_all:0,count_offline:0,count_error:0,count_warning:0,count_online:0,count_alarm:0},reducers:{SET_DEVICES:(e,t)=>{e.devices_list=t.payload,e.count_all=t.payload.length,e.count_offline=t.payload.filter(e=>-2===e.deviceStatus).length,e.count_error=t.payload.filter(e=>-1===e.deviceStatus).length,e.count_warning=t.payload.filter(e=>0===e.deviceStatus).length,e.count_online=t.payload.filter(e=>1===e.deviceStatus).length,e.count_alarm=t.payload.filter(e=>2===e.deviceStatus).length},SET_SIM_DATA_USAGE:(e,t)=>{let{phone:a,simDataUsage:s}=t.payload,r=e.devices_list.find(e=>e.phone===a);r&&(r.simDataUsage=s)},SET_DEVICES_FETCHING:(e,t)=>{e.isDeviceFetching=t.payload}}}),{SET_DEVICES:r,SET_SIM_DATA_USAGE:n,SET_DEVICES_FETCHING:i}=s.actions,l=s.reducer},8878:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>$});var s=a(5155),r=a(2115),n=a(3391),i=a(9789),l=a(9083),d=a(3307),c=a(2651);let o=async()=>await (0,d.A)("POST","api/Device/list-devices",{paginator:{page:1,more:!0},filter:{deviceStatus:"-3"}}),u=e=>{try{return(0,c.A)({method:"GET",url:"https://tracking.sctvonline.vn/iot/getdata.php?number=".concat(e),headers:{"Content-Type":"application/json"},withCredentials:!1}).then(e=>200===e.status||201===e.status?e.data.dataUseInMonth:null).catch(e=>(console.error("Error fetching SIM data:",e),null))}catch(e){return console.error("Error fetching SIM data:",e),null}},m=e=>{let t="01/".concat(String(new Date().getMonth()+1).padStart(2,"0"),"/").concat(new Date().getFullYear()," 00:00:00"),a="".concat(new Date().getDate().toString().padStart(2,"0"),"/").concat(String(new Date().getMonth()+1).padStart(2,"0"),"/").concat(new Date().getFullYear()," 00:00:00");try{return(0,c.A)({method:"POST",url:"https://api-m2m.vinaphone.com.vn/api/report/preview",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat("eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJ0aHUubmd1eWVuQHNhaWdvbmxhYi52biIsImV4cCI6MTc0MzM4ODE3NywidXNlcl9pZCI6Mzc0Mywic2NvcGUiOlsiS2jDoWNoIGjDoG5nIiwic2VhcmNoVXNlciIsImNyZWF0ZVNpbUdyb3VwIiwiZGVsZXRlU2ltR3JvdXAiLCJnZXRBbGVydExvZyIsInNlYXJjaEFsZXJ0UmVjdkdycCIsIndhbGxldEhpc3RvcnkiLCJzZWFyY2hTaW1Hcm91cCIsInNlYXJjaEN1c3RvbWVyIiwiY3JlYXRlQWxlcnRDb25maWciLCJzZWFyY2hBbGVydExvZyIsImFja0FsZXJ0IiwiY3JlYXRlQWxlcnQiLCJhY2N1cmFjeVdhbGxldCIsImNyZWF0ZUFsZXJ0V2FsbGV0RXhwaXJ5IiwidXBkYXRlU2ltR3JvdXAiLCJnZXRTaW0iLCJ1cGRhdGVEZXZpY2UiLCJnZXRBbGVydENvbmZpZyIsInNlYXJjaEFsZXJ0IiwidXBkYXRlQWxlcnQiLCJkZWxldGVBbGVydCIsInNoYXJlV2FsbGV0IiwiZ2V0Q29udHJhY3QiLCJzZWFyY2hDb250cmFjdCIsImdldEFsZXJ0IiwidXBkYXRlQWxlcnRSZWN2R3JwIiwiZ2V0UGVyc29uYWxEYXRhUG9saWN5IiwiY3JlYXRlVXNlciIsInVwZGF0ZVVzZXIiLCJ1cGRhdGVQcm9maWxlIiwiZ2V0U2ltR3JvdXAiLCJ1cGRhdGVBbGVydENvbmZpZyIsImNyZWF0ZUFsZXJ0UmVjdkdycCIsInNlYXJjaFNoYXJlSW5mbyIsImdldFJlcG9ydF85IiwiZ2V0UmVwb3J0XzExIiwiY3JlYXRlU2hhcmVJbmZvIiwic2VhcmNoQWxlcnRDb25maWciLCJnZXRBbGVydFJlY3ZHcnAiLCJkZWxldGVBbGVydFJlY3ZHcnAiLCJzZWFyY2hXYWxsZXQiLCJnZXRVc2VyIiwiZ2V0UHJvZmlsZVVzZXIiLCJzZWFyY2hTaW0iLCJnZXRDdXN0b21lciIsImNoYW5nZVN0YXR1c0FsZXJ0Iiwic2VhcmNoTG9nIiwiY3JlYXRlQWxlcnRXYWxsZXRUaHJlc2hvbGQiXX0.iZyppc2-faMbk0U_aJ8OcuiFNFKuM0lqtPszVWtXca8a5yQS9X5BK0BsW7jZc74-1APX7af-H-FfB-HFj_v02A")},data:{id:11,customerCodes:null,paramsValue:[{prKey:"msisdn",value:e},{prKey:"customer_codes",value:null},{prKey:"contract_codes",value:null},{prKey:"created_start_date",value:t},{prKey:"created_end_date",value:a}]}}).then(e=>200===e.status||201===e.status?e.data.reportContents[0].data:null).catch(e=>(console.error("Error fetching SIM data:",e),null))}catch(e){return console.error("Error fetching SIM data:",e),null}};var x=a(8254),h=a(1536),p=a(3117),g=a(648),v=a(8100),f=a(1889),b=a(1567),j=a(3312),y=a(8422),N=a(9967);let w=e=>{switch(e){case -1:return"red";case 0:return"gray";case 1:return"green";default:return"black"}},I=e=>(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:"flex md:justify-between space-x-2 md:space-x-0 w-full",children:[(0,s.jsx)("div",{className:"text-2xl ring-2 rounded-xs bg-white",title:"Android",children:(0,s.jsx)(N.aaf,{className:"p-0.5",color:w(e.androidStatus)})}),(0,s.jsx)("div",{className:"text-2xl ring-2 rounded-xs bg-white",title:"Modem",children:(0,s.jsx)(f.aRH,{className:"p-0.5 ",color:w(e.modemStatus)})}),(0,s.jsx)("div",{className:"text-2xl ring-2 rounded-xs bg-white",title:"Amply",children:(0,s.jsx)(v.wE,{className:"p-0.5",color:w(e.amplyStatus)})}),(0,s.jsx)("div",{className:"text-2xl ring-2 rounded-xs bg-white",title:"Speaker",children:(0,s.jsx)(y.nyV,{className:"p-0.5",color:w(e.speakerStatus)})}),(0,s.jsx)("div",{className:"text-2xl ring-2 rounded-xs bg-white",title:"CB",children:(0,s.jsx)(g.qg7,{className:"p-0.5",color:w(e.mcbStatus)})})]})}),S=e=>(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:(0,b.cn)("ring-2 md:shadow-[5px_5px_5px_2px] rounded-sm md:shadow-primary/60 overflow-hidden",(e=>{switch(e){case -2:return"bg-slate-300/70";case -1:return"bg-red-100/70";case 0:return"bg-yellow-100/70";case 1:return"bg-green-100/70";case 2:return"bg-orange-100/70";default:return"bg-[#fdfdfd]"}})(e.data.deviceStatus)),title:e.data.deviceName,children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("p",{className:"bg-primary text-white text-xs font-semibold inline-block mt-2 px-2.5 py-0.5",children:(0,s.jsx)("span",{className:"font-semibold",children:e.data.deviceId})}),(0,s.jsx)("p",{children:(0,s.jsxs)("span",{className:(0,b.cn)("text-sm font-semibold mt-2 px-2.5 py-0.5 flex items-center",(e=>{switch(e){case -2:return"text-slate-900";case -1:return"text-red-900";case 0:return"text-yellow-900";case 1:return"text-green-900";case 2:return"text-orange-900";default:return"unknown"}})(e.data.deviceStatus)),children:[(0,s.jsx)(f.Uwz,{className:"mr-1"}),(e=>{switch(e){case -2:return"offline";case -1:return"error";case 0:return"warning";case 1:return"online";case 2:return"alarm";default:return"unknown"}})(e.data.deviceStatus)]})})]}),(0,s.jsxs)("div",{className:"p-4 pt-2",children:[(0,s.jsx)("h2",{className:"text-sm font-semibold text-gray-900 w-full overflow-hidden whitespace-nowrap text-ellipsis",children:e.data.deviceName}),(0,s.jsxs)("p",{className:"mt-2 text-sm font-semibold flex group ",children:[(0,s.jsx)(g.Vmr,{className:"my-auto mr-1 group-hover:text-red-500 group-hover:ring-2 group-hover:rounded-xs cursor-pointer",onClick:()=>e.setIsOpened(!0)}),(0,s.jsx)("span",{className:"group-hover:text-red-500",children:":\xa0"}),(0,s.jsx)("span",{className:"text-gray-600 font-normal",children:e.data.phone||"unknown"})]}),(0,s.jsxs)("p",{className:"mt-2 text-sm font-semibold flex",children:[(0,s.jsx)(h.zdR,{className:"my-auto mr-1"}),":\xa0",(0,s.jsx)("span",{className:"text-gray-600 font-normal",children:e.data.simDataUsage||"unknown"})]}),(0,s.jsxs)("p",{className:"mt-2 text-sm font-semibold flex",children:[(0,s.jsx)(v.fOt,{className:"my-auto mr-1"}),(0,s.jsxs)("span",{className:(0,b.cn)("text-gray-600 font-normal",{"text-red-600":e.data.isOverTemperature}),children:[Number(e.data.temperature).toFixed(2),"\xb0C"]}),"\xa0/\xa0",(0,s.jsx)(p.ZDh,{className:"my-auto mr-1"}),(0,s.jsxs)("span",{className:(0,b.cn)("text-gray-600 font-normal",{"text-red-600":e.data.isOverHumidity}),children:[Number(e.data.humidity).toFixed(2),"%"]})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center mt-4",children:[(0,s.jsx)(I,{mcbStatus:e.data.mcbStatus,amplyStatus:e.data.amplyStatus,androidStatus:e.data.androidStatus,speakerStatus:e.data.speakerStatus,modemStatus:e.data.modemStatus}),(0,s.jsx)(j.$,{size:"sm",className:"md:hidden",onClick:()=>e.setIsOpened(!0),children:"Detail"})]})]})]})});var C=a(4223),k=a(767);function _(e){let{...t}=e;return(0,s.jsx)(C.bL,{"data-slot":"dialog",...t})}function F(e){let{...t}=e;return(0,s.jsx)(C.ZL,{"data-slot":"dialog-portal",...t})}function Z(e){let{className:t,...a}=e;return(0,s.jsx)(C.hJ,{"data-slot":"dialog-overlay",className:(0,b.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/80",t),...a})}function V(e){let{className:t,children:a,...r}=e;return(0,s.jsxs)(F,{"data-slot":"dialog-portal",children:[(0,s.jsx)(Z,{}),(0,s.jsxs)(C.UC,{"data-slot":"dialog-content",className:(0,b.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...r,children:[a,(0,s.jsxs)(C.bm,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,s.jsx)(k.A,{}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function J(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"dialog-header",className:(0,b.cn)("flex flex-col gap-2 text-center sm:text-left",t),...a})}function X(e){let{className:t,...a}=e;return(0,s.jsx)(C.hE,{"data-slot":"dialog-title",className:(0,b.cn)("text-lg leading-none font-semibold",t),...a})}function E(e){let{className:t,...a}=e;return(0,s.jsx)(C.VY,{"data-slot":"dialog-description",className:(0,b.cn)("text-muted-foreground text-sm",t),...a})}var A=a(7081);let R=e=>{let[t,a]=(0,r.useState)([]);return(0,r.useEffect)(()=>{var t;let s=async()=>{var t,s;let r=[];switch(null===(t=e.data)||void 0===t?void 0:t.simCarrier){case"Viettel":case"Mobifone":break;case"Vinaphone":r=await m("841".concat(null===(s=e.data.phone)||void 0===s?void 0:s.slice(1)))}r&&a(r)};a([]),(null===(t=e.data)||void 0===t?void 0:t.simDataUsage)&&s()},[e.data]),(0,s.jsx)(s.Fragment,{children:e.data&&(0,s.jsx)(_,{open:e.isOpened,onOpenChange:()=>e.setIsOpened(!1),children:(0,s.jsxs)(V,{children:[(0,s.jsxs)(J,{children:[(0,s.jsxs)(X,{className:"flex items-center",children:[(0,s.jsx)("div",{className:"text-white bg-primary px-2 mr-2 rounded-md flex items-center min-h-8",children:e.data.deviceId}),e.data.deviceName]}),(0,s.jsx)(E,{})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("p",{className:"font-semibold",children:["Nh\xe0 mạng:\xa0",(0,s.jsx)("span",{className:"font-normal text-slate-600",children:e.data.simCarrier?e.data.simCarrier:"Kh\xf4ng c\xf3 dữ liệu"})]}),(0,s.jsxs)("p",{className:"font-semibold",children:["Sim Data:\xa0",(0,s.jsx)("span",{className:"font-normal text-slate-600",children:e.data.phone?e.data.phone:"Kh\xf4ng c\xf3 dữ liệu"})]}),e.data.simDataUsage?0===t.length?(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-2 mt-2",children:[(0,s.jsx)(A.E,{className:"h-[2rem]"}),(0,s.jsx)(A.E,{className:"h-[2rem]"}),(0,s.jsx)(A.E,{className:"h-[2rem]"}),(0,s.jsx)(A.E,{className:"h-[2rem]"}),(0,s.jsx)(A.E,{className:"h-[2rem]"}),(0,s.jsx)(A.E,{className:"h-[2rem]"})]}):(0,s.jsx)("div",{className:"overflow-y-auto max-h-[16rem] mt-2",children:(0,s.jsxs)("table",{className:"w-full border-collapse border border-black",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"text-sm",children:[(0,s.jsx)("th",{className:"text-left py-2 px-3 border border-black",children:"Time"}),(0,s.jsx)("th",{className:"text-left py-2 px-3 border border-black",children:"Data Used"})]})}),(0,s.jsx)("tbody",{children:t.map((e,t)=>(0,s.jsxs)("tr",{className:"text-sm",children:[(0,s.jsx)("td",{className:"py-1 px-3 border border-black",children:e.TIME}),(0,s.jsxs)("td",{className:"py-1 px-3 border border-black",children:[e.DATAUSED," MB"]})]},t))})]})}):null]}),(0,s.jsx)("div",{className:"w-[50%]"})]})})})},T=e=>{let t=(0,n.d4)(e=>e.device.count_all),a=(0,n.d4)(e=>e.device.count_online),r=(0,n.d4)(e=>e.device.count_warning),i=(0,n.d4)(e=>e.device.count_error),l=(0,n.d4)(e=>e.device.count_offline),d=(0,n.d4)(e=>e.device.count_alarm),c=t=>{e.setPagination({pageIndex:0,pageSize:20}),e.setColumnFilters(null===t?[]:[{id:"deviceStatus",value:t}]),e.setSearch("")};return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{className:"flex items-center space-x-4 flex-wrap gap-y-2",children:[{label:"All",value:null,count:t,extraClass:"bg-cyan-100/70 text-cyan-900"},{label:"Online",value:1,count:a,extraClass:"bg-green-100/70 text-green-900"},{label:"Warning",value:0,count:r,extraClass:"bg-yellow-100/70 text-yellow-900"},{label:"Error",value:-1,count:i,extraClass:"bg-red-100/70 text-red-900"},{label:"Offline",value:-2,count:l,extraClass:"bg-slate-100/70 text-slate-900"},{label:"Alarm",value:2,count:d,extraClass:"bg-orange-100/70 text-orange-900"}].map(e=>{let{label:t,value:a,count:r,extraClass:n}=e;return(0,s.jsxs)("div",{className:"h-8 flex cursor-pointer ring-1 ring-gray-200 rounded-md font-semibold",onClick:()=>c(a),children:[(0,s.jsx)("div",{className:(0,b.cn)("px-2 h-full flex items-center justify-center rounded-l-md",n),children:t}),(0,s.jsx)("div",{className:"h-8 w-8 flex items-center justify-center bg-slate-200 rounded-r-md text-sm",children:r})]},t)})})})};var z=a(7661),G=a(3518),D=a(6967),W=a(7054);let Y=()=>{window.scrollTo({top:0,behavior:"smooth"})},U=e=>((0,r.useEffect)(()=>{Y()},[e.pagination.pageIndex]),(0,s.jsxs)("div",{className:"flex items-center justify-end space-x-2 py-4",children:[(0,s.jsxs)("div",{className:"flex w-[100px] items-center justify-center text-sm font-medium",children:["page ",e.pagination.pageIndex+1," / ",e.table.getPageCount()]}),(0,s.jsxs)(j.$,{variant:"outline",className:"h-8 w-8 p-0 cursor-pointer",onClick:()=>{e.setPagination({pageSize:20,pageIndex:0})},disabled:!e.table.getCanPreviousPage(),children:[(0,s.jsx)("span",{className:"sr-only",children:"Go to first page"}),(0,s.jsx)(z.A,{})]}),(0,s.jsxs)(j.$,{variant:"outline",className:"h-8 w-8 p-0 cursor-pointer",onClick:()=>{e.setPagination({pageSize:20,pageIndex:e.pagination.pageIndex-1})},disabled:!e.table.getCanPreviousPage(),children:[(0,s.jsx)("span",{className:"sr-only",children:"Go to previous page"}),(0,s.jsx)(G.A,{})]}),(0,s.jsxs)(j.$,{variant:"outline",className:"h-8 w-8 p-0 cursor-pointer",onClick:()=>{e.setPagination({pageSize:20,pageIndex:e.pagination.pageIndex+1})},disabled:!e.table.getCanNextPage(),children:[(0,s.jsx)("span",{className:"sr-only",children:"Go to next page"}),(0,s.jsx)(D.A,{})]}),(0,s.jsxs)(j.$,{variant:"outline",className:"h-8 w-8 p-0 cursor-pointer",onClick:()=>{e.setPagination({pageSize:20,pageIndex:e.table.getPageCount()-1})},disabled:!e.table.getCanNextPage(),children:[(0,s.jsx)("span",{className:"sr-only",children:"Go to last page"}),(0,s.jsx)(W.A,{})]})]})),O=[{header:"Device ID",accessorKey:"deviceId"},{header:"Device Status",accessorKey:"deviceStatus",filterFn:"weakEquals",enableGlobalFilter:!1},{header:"Số điện thoại",accessorKey:"phone"},{header:"Device Name",accessorKey:"deviceName"}],M=e=>{let t=(0,n.wA)(),a=(0,n.d4)(e=>e.device.devices_list),d=(0,n.d4)(e=>e.device.isDeviceFetching),c=(0,n.d4)(e=>e.auth.accessToken);(0,r.useEffect)(()=>{let e=async e=>{let t=await u(e)/1024/1024;return t>1024?"".concat((t/1024).toFixed(2)," GB"):"".concat(t.toFixed(2)," MB")},a=async()=>{let[a,s]=await o();if(200===a){for(let a of(t((0,x.r_)(s.items)),s.items))if(a.phone){let s=await e(a.phone);s&&t((0,x.Sy)({phone:a.phone,simDataUsage:s}))}}};c&&a()},[d]);let[m,h]=(0,r.useState)(!1),[p,g]=(0,r.useState)(null),[v,f]=(0,r.useState)([]),[b,j]=(0,r.useState)({pageIndex:0,pageSize:20}),y=(0,i.N4)({columns:O,data:a,state:{columnFilters:v,pagination:b,globalFilter:e.search},getCoreRowModel:(0,l.HT)(),getFilteredRowModel:(0,l.hM)(),onColumnFiltersChange:f,getPaginationRowModel:(0,l.kW)()});return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(T,{setColumnFilters:f,setPagination:j,setSearch:e.setSearch}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 2xl:grid-cols-6 gap-6 relative",children:[(0,s.jsx)("div",{className:"col-span-full lg:h-[0.8rem] h-[2.4rem]"}),y.getRowModel().rows.map((e,t)=>(0,s.jsx)("div",{onClick:()=>{g(e.original)},children:(0,s.jsx)(S,{data:e.original,setIsOpened:h})},t))]}),(0,s.jsx)("div",{className:"flex md:justify-end justify-center mt-4 space-x-2",children:(0,s.jsx)(U,{table:y,pagination:b,setPagination:j})}),(0,s.jsx)(R,{isOpened:m,setIsOpened:h,data:p})]})};var P=a(9606),B=a(3415),L=a(5060),H=a(3886),Q=a(3900);let K=e=>{let t=B.z.object({search:B.z.string().max(50)}),a=(0,P.mN)({resolver:(0,L.u)(t),defaultValues:{search:e.search}}),r=async t=>{e.setSearch(t.search),a.reset()};return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(H.lV,{...a,children:(0,s.jsx)("form",{action:"",onSubmit:a.handleSubmit(r),children:(0,s.jsx)(H.zB,{control:a.control,name:"search",render:e=>{let{field:t}=e;return(0,s.jsx)(H.eI,{children:(0,s.jsx)(H.MJ,{children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(Q.p,{...t,placeholder:"Search...",className:"ml-auto ring-1 ring-accent/80 md:w-[16rem] w-full md:rounded-lg rounded-full pr-[2.4rem]"}),(0,s.jsx)("button",{type:"submit",className:"absolute right-4 top-1/2 transform -translate-y-1/2 z-10 bg-background",children:(0,s.jsx)(h.KSO,{className:"text-slate-400"})})]})})})}})})})})},$=()=>{let[e,t]=(0,r.useState)("");return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("title",{children:"Home"}),(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("h1",{className:"text-3xl font-semibold",children:"Thống k\xea"}),(0,s.jsx)(K,{search:e,setSearch:t})]}),(0,s.jsx)("div",{className:"mt-10",children:(0,s.jsx)(M,{search:e,setSearch:t})})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[897,362,204,479,271,777,711,264,891,846,121,899,441,587,358],()=>t(7710)),_N_E=e.O()}]);